# 彩色标题栏

**中文** | [English](README.md)

一个基于项目名称为 VS Code 标题栏添加彩色背景的扩展。

## ✨ 功能特性

- 🎨 **基于项目的颜色**: 根据你的项目自动生成独特的颜色
- 🔄 **多种哈希源**: 可选择项目名称、完整路径或项目名称+日期
- 🌈 **可自定义调色板**: 为浅色和深色主题分别设置颜色方案
- 📁 **智能项目检测**: 可配置文件/文件夹指示器来识别项目
- 🌍 **多语言支持**: 完整的中英文界面
- ✨ **渐变叠加效果**: 添加美丽的渐变叠加来增强标题栏外观（需要 CSS 修改）

## 🔥 v1.2.0 重大更新

**所有之前的命令已被移除，并替换为统一的控制面板！** 新的控制面板为管理所有扩展设置提供了更直观和用户友好的界面。[了解更多关于控制面板的信息](#控制面板)。

![控制面板2](https://raw.githubusercontent.com/baendlorel/colorful-titlebar/refs/heads/main/draft/control-panel.png)

## ⚠️ 重要提示

**渐变功能会修改 VS Code 的核心 CSS 文件**，这可能触发 VS Code 的完整性检查并显示"损坏"警告。这是预期行为，不会影响功能。扩展会在任何修改前自动创建备份。

## 开发

1. 克隆或下载此项目
2. 在项目目录中运行 `pnpm install`
3. 运行 `pnpm build` 编译扩展
4. 按 `F5` 在新的 VS Code 窗口中测试扩展

## 控制面板

扩展现在具有全面的控制面板，用统一的、用户友好的界面替换了所有之前的命令。

### 打开控制面板

- **命令**: `Ctrl+Shift+P` → "Colorful Titlebar: Open Control Panel"
- **菜单**: 右键点击标题栏 → "Colorful Titlebar Settings"

### 控制面板功能

控制面板提供所有扩展设置的实时配置：

#### 🔧 基本设置

- **显示信息消息**: 开启/关闭信息弹窗
- **工作台 CSS 路径**: 指定 VS Code 工作台 CSS 文件的自定义路径（用于渐变功能）

#### 🌈 颜色配置

- **哈希源**: 选择颜色生成方式：
  - 项目名称：仅基于文件夹名称
  - 完整路径：基于完整项目路径
  - 项目名称+日期：基于项目名称和当前日期
- **颜色选择器**: 为当前项目手动选择自定义颜色

#### ✨ 渐变设置

- **渐变样式**: 从多种渐变叠加效果中选择：
  - 无：禁用渐变叠加
  - 亮色中心：带有亮色中心的线性渐变
  - 左侧亮色：从左侧的径向渐变
  - 弧形左侧：从左侧的替代径向渐变
- **渐变亮度**: 控制亮色区域的亮度/不透明度 (0-100%)
- **渐变暗度**: 控制暗色区域的暗度/不透明度 (0-100%)

#### 🔄 操作

- **刷新颜色**: 强制为当前项目重新生成颜色
- **应用设置**: 所有更改立即应用并提供视觉反馈

### 实时反馈

控制面板提供：

- **实时预览**: 更改立即应用
- **错误处理**: 对无效输入提供清晰的错误消息
- **成功通知**: 设置成功应用时的确认
- **主题适配**: 控制面板自动适配 VS Code 当前主题

## 🚀 使用方法

### 快速开始

1. 在 VS Code 中打开任何项目
2. 扩展自动检测项目并应用颜色
3. 使用 `Ctrl+Shift+P` → "Colorful Titlebar: Open Control Panel" 自定义设置
4. 享受你的彩色标题栏！

### 渐变样式

- **亮中心**: 带有亮中心效果的线性渐变

  ![Bright Center Effect](https://raw.githubusercontent.com/baendlorel/colorful-titlebar/refs/heads/main/draft/light-center.png)

- **亮左侧**: 从左侧产生亮效果的径向渐变

  ![Bright Left Effect](https://raw.githubusercontent.com/baendlorel/colorful-titlebar/refs/heads/main/draft/light-left.png)

- **左侧弧光**: 从左侧产生亮效果的径向渐变 2

  ![Arc Left Effect](https://raw.githubusercontent.com/baendlorel/colorful-titlebar/refs/heads/main/draft/arc-left.png)

- **配合配置项**: `colorful-titlebar.gradientBrightness`和`colorful-titlebar.gradientDarkness` 来控制明暗度

### 前置要求

扩展需要将 VS Code 的标题栏样式设置为"自定义"。如果未配置，扩展会提示你自动更改。

**对于渐变功能**: 扩展需要修改 VS Code 的核心 CSS 文件。它会自动检测你的 VS Code 安装路径，或允许你指定自定义路径。

扩展需要 VS Code 的标题栏样式设置为"custom"。如果未配置，扩展将提示你自动更改。

## ⚙️ 配置选项

打开 VS Code 设置并配置以下选项：

### `colorful-titlebar.enabled`

- **类型**: 布尔值
- **默认值**: `true`
- **描述**: 启用或禁用彩色标题栏效果

### `colorful-titlebar.hashSource`

- **类型**: 字符串
- **默认值**: `"projectName"`
- **选项**:
  - `"projectName"`: 仅从项目文件夹名称生成颜色
  - `"fullPath"`: 从完整项目路径生成颜色
  - `"projectNameDate"`: 从项目名称和当前日期生成颜色
- **描述**: 生成基于哈希的颜色的源

### `colorful-titlebar.lightThemeColors`

- **类型**: 字符串数组
- **默认值**: `["rgb(167, 139, 250)", "rgb(147, 197, 253)", ...]`
- **描述**: 浅色主题的调色板
- **支持格式**: `#RRGGBB`, `#RRGGBBAA`, `rgb()`, `rgba()`, `hsl()`, `hsla()`

### `colorful-titlebar.darkThemeColors`

- **类型**: 字符串数组
- **默认值**: `["rgb(68, 0, 116)", "rgb(0, 47, 85)", ...]`
- **描述**: 深色主题的调色板
- **支持格式**: `#RRGGBB`, `#RRGGBBAA`, `rgb()`, `rgba()`, `hsl()`, `hsla()`

### `colorful-titlebar.projectIndicators`

- **类型**: 字符串数组
- **默认值**: `[".git", "package.json", "pom.xml", ...]`
- **描述**: 如果 VS Code 打开的目录包含这些文件中的一个，那么它会被认为是一个**项目**，从而拥有彩色标题栏

### `colorful-titlebar.workbenchCssPath`

- **类型**: 字符串
- **默认值**: `""`
- **描述**: workbench.desktop.main.css 文件的自定义路径。

### `colorful-titlebar.gradientBrightness`

- **类型**: 数字
- **默认值**: `0.72`
- **范围**: `0.0` 到 `1.0`
- **描述**: 控制渐变叠加中亮区域的亮度/不透明度。数值越高，亮效果越明显。

### `colorful-titlebar.gradientDarkness`

- **类型**: 数字
- **默认值**: `0.26`
- **范围**: `0.0` 到 `1.0`
- **描述**: 控制渐变叠加中暗区域的暗度/不透明度。数值越高，阴影效果越明显。

### `colorful-titlebar.showInfoPop`

- **类型**: 布尔值
- **默认值**: `true`
- **描述**: 是否显示信息提示消息

## 🔧 工作原理

### 基础颜色应用

1. **项目检测**: 检查配置的指示器文件（如 `.git`, `package.json`）
2. **颜色生成**: 从选定的源（项目名称/路径/日期）创建哈希
3. **颜色选择**: 将哈希映射到你配置的调色板中的颜色
4. **主题感知**: 为浅色和深色主题使用不同的调色板
5. **标题栏更新**: 将颜色应用到 VS Code 的标题栏背景

### 渐变增强（高级功能）

1. **CSS 文件检测**: 定位 VS Code 的 `workbench.desktop.main.css` 文件
2. **自动备份**: 在任何修改前创建备份
3. **CSS 注入**: 使用唯一标记添加渐变叠加样式
4. **样式选择**: 从不同的渐变效果中选择（亮中心、亮左侧）
5. **轻松恢复**: 使用禁用命令移除渐变，从备份中恢复

## 📋 系统要求

- VS Code 1.74.0 或更高版本
- 标题栏样式必须设置为"custom"（扩展将帮助你配置此项）

## ⚠️ 注意事项

- 扩展会修改 VS Code 的工作区设置用于基础颜色功能
- **渐变功能会修改 VS Code 的核心 CSS 文件**，可能会触发完整性警告
- 不同项目将根据你的哈希源选择获得一致的颜色
- 颜色会自动适应你当前的主题（浅色/深色）
- 渐变叠加会自动备份，可以安全移除
- 使用渐变功能时 VS Code 可能显示"损坏"警告 - 这是预期行为且安全

## 📄 许可证

MIT License - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📝 更新日志

### 1.2.0

- **🔥 重大变更**: 用统一控制面板替换所有命令
- **新控制面板**: 直观的基于网页的所有设置界面
- **增强颜色选择器**: 带实时预览的手动颜色选择
- **改进用户体验**: 更好的错误处理和成功反馈
- 修复了无论是否阻止 pop 信息都会导致渐变启用的问题

### 1.1.0

- 新增了渐变亮度、渐变暗度等配置
- 多哈希源选择 - 支持项目名、完整路径、项目名+日期等
- 代码结构调整、尝试了若干错误处理方案但最终选择了精简

### 1.0.0

- 美丽的渐变叠加效果。灵感来自 Idea

### .0.0.1

- 初始发布
- 基于项目的颜色生成
- 多语言支持
- 可自定义调色板
- 智能项目检测
